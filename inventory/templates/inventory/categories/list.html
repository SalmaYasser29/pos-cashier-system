{% extends "accounts/layout.html" %}
{% load static %}
{% block title %}Categories{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
    <h1 class="mb-2">Categories</h1>

    <div class="d-flex align-items-center mb-3 flex-wrap gap-2">
        <form id="searchForm" class="search-bar-wrapper">
            <input type="text" name="q" id="searchInput" value="{{ query }}"
                  placeholder="Search categories..." class="search-input">
            <button type="submit" class="search-btn">
                Search
            </button>
        </form>

        {% if user.is_superuser or user.role == "admin" %}
            <a href="{% url 'inventory:category_create' %}" class="btn btn-success" style="margin-bottom: 1.5em;">
                Add Category
            </a>
        {% endif %}
    </div>

</div>

<div id="categoriesContainer">
    {% include "inventory/categories/_categories_table.html" %}
</div>
{% endblock %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
    // Pass URL for AJAX requests
    window.categoriesListUrl = "{% url 'inventory:category_list' %}";
</script>
<script src="{% static 'js/inventory.js' %}"></script>
{% endblock %}
