{% extends "accounts/layout.html" %}
{% block title %}Supplier Detail{% endblock %}

{% block content %}
  <h1 class="page-title">Supplier Detail</h1>

  <div class="supplier-card card-table">
      <div class="supplier-header d-flex justify-content-between align-items-center mb-4">
          <h2>{{ supplier.name }}</h2>
          <div class="supplier-actions">
              {% if request.user.is_superuser or request.user.is_staff %}
                  {% if supplier.branch == request.user.branch or request.user.is_superuser %}
                      <a href="{% url 'inventory:supplier_edit' supplier.id %}" class="btn btn-warning">Edit</a>
                      <a href="{% url 'inventory:supplier_delete' supplier.id %}" class="btn btn-danger">Delete</a>
                  {% endif %}
              {% endif %}
              <a href="{% url 'inventory:supplier_list' %}" class="btn btn-secondary">Back</a>
          </div>
      </div>

      <div class="supplier-info gap-4">
          <div class="info-item">
              <strong>Contact Person:</strong> {{ supplier.contact_person|default:"-" }}
          </div>
          <div class="info-item">
              <strong>Phone:</strong> {{ supplier.phone|default:"-" }}
          </div>
          <div class="info-item">
              <strong>Email:</strong> {{ supplier.email|default:"-" }}
          </div>
          <div class="info-item">
              <strong>Address:</strong> {{ supplier.address|default:"-" }}
          </div>
          <div class="info-item">
              <strong>Branch:</strong> {{ supplier.branch.name }}
          </div>
      </div>

      {% comment %} Optional: Linked items/products tab {% endcomment %}
      {% if supplier.item_set.exists %}
      <div class="supplier-items mt-4">
          <h3>Supplied Items</h3>
          <ul class="list-group">
              {% for item in supplier.item_set.all %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                  {{ item.name }}
                  <span class="badge bg-primary rounded-pill">{{ item.category.name }}</span>
              </li>
              {% endfor %}
          </ul>
      </div>
      {% endif %}

      {% comment %} Optional: Logs section {% endcomment %}
      <div class="supplier-logs mt-4">
          <a href="{% url 'inventory:logs_list' 'Supplier' supplier.id %}" class="btn btn-info">View Logs</a>
      </div>
  </div>
{% endblock %}
